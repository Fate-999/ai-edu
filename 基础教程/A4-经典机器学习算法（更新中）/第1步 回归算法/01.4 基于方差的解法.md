

### $\hat a$ 和 $\hat b$ 的特殊解法

我们把公式1.8的分子分母都除以 $n^2$，会得到下面的公式：

$$
\hat a = \frac{\frac{1}{n}\sum\limits_{i=1}^n x_i y_i - \frac{1}{n^2}\sum\limits_{i=1}^n x_i \sum\limits_{i=1}^n y_i}{\frac{1}{n}\sum\limits_{i=1}^nx_i^2 - (\frac{1}{n}\sum\limits_{i=1}^nx_i)^2} \tag{1.16}
$$

观察公式1.16，我们可以发现其分子部分就是公式1.15的第二种形式，其分母部分就是公式1.11的第二种形式，于是，$\hat a$ 可以这样得到：


$$
\hat a = \frac{cov(x, y)}{var(x)} \tag{1.17}
$$

再从公式1.7变形得到：

$$
\hat b = {1 \over n} \sum_{i=1}^n (y_i - \hat a x_i) = \bar{y}-\hat{a}\bar{x}  \tag{1.18}
$$

```Python
def least_square_2(X,Y):
    # 公式1.17
    numerator = np.cov(X, Y, rowvar=False)[0,1]
    denominator = np.var(X)
    a_hat = numerator / denominator
    # 公式1.18
    b_hat = np.mean(Y) - a_hat * np.mean(X)
```
最后得到的结果是：
```
a_hat=0.5029319163209244, b_hat=1.0034950491991041
```
与真实值非常接近。
